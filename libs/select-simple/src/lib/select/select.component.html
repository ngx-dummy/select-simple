<div
	#container
	[ngClass]="{
		select: true,
		disabled: disabled,
		'select-open': overlayVisible
	}"
	(click)="onMouseclick($event)"
	[ngStyle]="headerStyle"
	[class]="styleClass"
>
	<span *ngIf="label !== null">
		<ng-container *ngIf="!selectedItemTemplate">{{ label || 'empty' }}</ng-container>

		<ng-container *ngTemplateOutlet="selectedItemTemplate; context: { $implicit: label, selectedOption: selectedOption }"></ng-container>
	</span>

	<span
		[ngClass]="{
			'select-label': true,
			'select-label-empty': placeholder === null || placeholder?.length === 0
		}"
		*ngIf="label === null"
	>
		{{ placeholder || 'empty' }}
	</span>

	<div class="select-trigger" role="button" [attr.aria-expanded]="overlayVisible">
		<ng-container *ngTemplateOutlet="opennerBtnTemplate; context: { $implicit: overlayVisible }"></ng-container>
	</div>

	<div *ngIf="overlayVisible" [ngClass]="'select-panel'" [ngStyle]="panelStyle" [class]="panelStyleClass">
		<ng-container *ngIf="!!options?.length && !!optionsToDisplay?.length">
			<ng-container
				*ngTemplateOutlet="
					itemsListDefaultTmpl;
					context: {
						$implicit: optionsToDisplay,
						selectedOption: selectedOption
					}
				"
			></ng-container>
			<button *ngIf="none" class="reset" (click)="reset()">
				<span>Reset</span>
			</button>
		</ng-container>

		<ng-container *ngIf="!!!options?.length || !!!optionsToDisplay?.length">
			<ng-content select=".simple-items"></ng-content>
			<button *ngIf="none" class="reset" (click)="reset()">
				<span>Reset</span>
			</button>
		</ng-container>
	</div>
</div>

<ng-template #defaultSelectIconTmpl let-overlayVisible>
	<span class="select-trigger-icon" [ngClass]="selectIconClass" [ngClass]="{ open: overlayVisible, close: !overlayVisible }">
		<img class="select-trigger__default-img" [src]="trigger_icon" />
	</span>
</ng-template>

<ng-template #itemsListDefaultTmpl let-options let-selectedOption="selectedOption">
	<ng-container>
		<div class="select-items-wrapper">
			<ul class="select-items">
				<ng-template ngFor let-option let-i="index" [ngForOf]="options">
					<ngxd-select-item
						[option]="option"
						[selected]="selectedOption === option"
						[label]="getOptionLabel(option)"
						[disabled]="isOptionDisabled(option)"
						(onClick)="onItemClick($event)"
						[template]="itemTemplate"
						[itemSize]="itemSize"
					></ngxd-select-item>
				</ng-template>
			</ul>
		</div>
	</ng-container>
</ng-template>
