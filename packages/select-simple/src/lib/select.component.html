<span *ngIf="!!label">
	<ng-container *ngIf="!selectedItemTemplate">{{ label || 'Nothing selected' }}</ng-container>
	<ng-container *ngIf="selectedItemTemplate">
		<ng-container
			*ngTemplateOutlet="selectedItemTemplate; context: { $implicit: label, selectedOption: selectedOption }">
		</ng-container>
	</ng-container>
</span>

<span *ngIf="!!!label" [ngClass]="{
			'select-label': true,
			'select-label-empty': !!!placeholder || !!!placeholder?.length
		}">
	{{ placeholder || 'empty' }}
</span>

<div class="select-trigger" role="button" [attr.aria-expanded]="overlayVisible">
	<ng-container *ngIf="opennerBtnTemplate">
		<ng-container *ngTemplateOutlet="opennerBtnTemplate; context: { $implicit: overlayVisible }"></ng-container>
	</ng-container>
</div>

<div *ngIf="overlayVisible" [ngClass]="'select-panel'" [ngStyle]="panelStyle" [class]="panelStyleClass">
	<ng-container *ngIf="!!options?.length && !!optionsToDisplay?.length">
		<ng-container
			*ngTemplateOutlet="itemsListDefaultTmpl; context: { $implicit: optionsToDisplay, selectedOption: selectedOption }">
		</ng-container>
		<button *ngIf="none" class="reset" (click)="reset()">Reset</button>
	</ng-container>

	<ng-container *ngIf="!!!options?.length || !!!optionsToDisplay?.length">
		<div class="select-items-wrapper">
			<div class="select-items">
				<ng-content select=".simple-items"></ng-content>
			</div>
		</div>
		<button *ngIf="none" class="reset" (click)="reset()">
			<span>Reset</span>
		</button>
	</ng-container>
</div>

<ng-template #defaultSelectIconTmpl let-overlayVisible>
	<span class="select-trigger-icon" [ngClass]="selectIconClass"
		[ngClass]="{ open: overlayVisible, close: !overlayVisible }">
		<img class="select-trigger__default-img" [src]="trigger_icon" />
	</span>
</ng-template>

<ng-template #itemsListDefaultTmpl let-options let-selectedOption="selectedOption">
	<div class="select-items-wrapper">
		<div class="select-items">
			<ng-template ngFor let-option let-i="index" [ngForOf]="options">
				<ngxd-select-item [option]="option" [selected]="selectedOption === option" [label]="getOptionLabel(option)"
					[disabled]="isOptionDisabled(option)" (optionClick)="onItemClick($event)" [template]="itemTemplate"
					[itemSize]="itemSize"></ngxd-select-item>
			</ng-template>
		</div>
	</div>
</ng-template>